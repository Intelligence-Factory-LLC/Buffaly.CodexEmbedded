<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Codex Web CLI</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<link rel="stylesheet" href="site.css">
</head>
<body>
	<div class="layout">
		<header class="toolbar navbar navbar-dark">
			<div class="toolbar-left nav nav-pills">
				<a class="toolbar-link nav-link active" href="./">Codex</a>
				<a class="toolbar-link nav-link" href="logs">Logs</a>
				<a class="toolbar-link nav-link" href="watcher">Watcher</a>
			</div>
			<div class="toolbar-right">
				<button id="aboutBtn" class="toolbar-secondary toolbar-about-btn" type="button" title="About this project" aria-label="About this project">
					About
				</button>
			</div>
			<button id="mobileProjectsBtn" class="toolbar-mobile-projects-btn" type="button" title="Show projects" aria-label="Show projects" aria-expanded="false">
				<i class="bi bi-kanban" aria-hidden="true"></i>
				<span>Projects</span>
			</button>
		</header>
		<div id="securityWarningBanner" class="security-warning-banner hidden" role="alert"></div>
		<main class="main codex-main">
			<aside id="sessionSidebar" class="panel session-sidebar">
				<div class="panel-title panel-title-row">
					<span>Projects</span>
					<button id="sidebarToggleBtn" type="button" class="sidebar-collapse-btn" title="Hide projects" aria-label="Hide projects">
						<i class="bi bi-layout-sidebar-inset-reverse" aria-hidden="true"></i>
					</button>
				</div>
				<div class="session-sidebar-controls">
					<button id="newProjectSidebarBtn" class="new-project-btn" type="button">
						<i class="bi bi-plus-circle-fill" aria-hidden="true"></i>
						<span>New Project</span>
					</button>
				</div>
				<div id="projectList" class="project-list"></div>
			</aside>
			<section class="panel chat-panel">
				<div class="panel-title panel-title-row conversation-title-row">
					<span id="conversationTitle" class="conversation-title-text">Conversation</span>
					<div id="sessionMeta" class="conversation-meta">
						<label id="sessionMetaModelItem" class="conversation-meta-item conversation-meta-model conversation-meta-detail" for="conversationModelSelect">
							<span class="conversation-meta-label">Model</span>
							<select id="conversationModelSelect"></select>
						</label>
						<div id="permissionLevelIndicator" class="conversation-meta-item permission-level-indicator" title="Session permissions">perm: --</div>
					</div>
				</div>
				<div id="chatMessages" class="watcher-timeline"></div>
				<button id="scrollToBottomBtn" class="scroll-to-bottom-btn hidden" type="button" title="Jump to latest messages" aria-label="Jump to latest messages">
					<i class="bi bi-arrow-down"></i>
				</button>
				<div id="approvalPanel" class="approval-panel hidden">
					<div id="approvalSummary" class="approval-summary"></div>
					<div id="approvalDetails" class="approval-details"></div>
					<div class="approval-actions">
						<button data-decision="accept" type="button">Accept</button>
						<button data-decision="acceptForSession" type="button">Accept Session</button>
						<button data-decision="decline" type="button">Decline</button>
						<button data-decision="cancel" type="button">Cancel</button>
					</div>
				</div>
				<div id="promptQueue" class="prompt-queue hidden"></div>
				<div id="composerImages" class="composer-images hidden"></div>
				<form id="promptForm" class="prompt-form">
					<textarea id="promptInput" autocomplete="off" rows="4" placeholder="Type a prompt..."></textarea>
					<div class="prompt-actions">
						<input id="imageUploadInput" type="file" accept="image/*" multiple class="hidden">
						<button id="imageUploadBtn" class="prompt-upload-btn" type="button" title="Attach image" aria-label="Attach image">
							<i class="bi bi-plus-lg" aria-hidden="true"></i>
							<span class="visually-hidden">Attach image</span>
						</button>
						<button id="queuePromptBtn" class="prompt-queue-btn hidden" type="button" title="Queue this instruction" aria-label="Queue this instruction">
							<i class="bi bi-list-task" aria-hidden="true"></i>
							<span class="visually-hidden">Queue</span>
						</button>
						<button id="cancelTurnBtn" class="prompt-cancel-btn hidden" type="button" title="Stop running turn" aria-label="Stop running turn">
							<i class="bi bi-stop-fill" aria-hidden="true"></i>
							<span class="visually-hidden">Stop</span>
						</button>
						<button id="sendPromptBtn" class="prompt-send-btn" type="submit" aria-label="Send prompt">
							<i class="bi bi-arrow-up" aria-hidden="true"></i>
							<span class="visually-hidden">Send</span>
						</button>
					</div>
				</form>
			</section>
		</main>
		<button id="sidebarBackdrop" class="sidebar-backdrop hidden" type="button" aria-label="Close projects"></button>

		<div id="modelCommandModal" class="command-modal hidden" role="dialog" aria-modal="true" aria-labelledby="modelCommandTitle">
			<div class="command-modal-card">
				<div id="modelCommandTitle" class="command-modal-title">Select Model</div>
				<div class="command-modal-body">
					<label for="modelCommandSelect">Model</label>
					<select id="modelCommandSelect"></select>
					<input id="modelCommandCustomInput" type="text" placeholder="Custom model" class="hidden">
				</div>
				<div class="command-modal-actions">
					<button id="modelCommandApplyBtn" type="button">Apply</button>
					<button id="modelCommandCancelBtn" type="button">Cancel</button>
				</div>
			</div>
		</div>

		<div id="aboutModal" class="command-modal hidden" role="dialog" aria-modal="true" aria-labelledby="aboutModalTitle">
			<div class="command-modal-card about-modal-card">
				<div id="aboutModalTitle" class="command-modal-title">About</div>
				<div class="command-modal-body about-modal-body">
					<div id="aboutProjectLine" class="about-line">Buffaly.CodexEmbedded</div>
					<div id="aboutVersionLine" class="about-line about-muted">Version: unknown</div>
					<div class="about-line">
						Built by Buffaly (Intelligence Factory LLC):
						<a href="https://buffa.ly" target="_blank" rel="noopener">https://buffa.ly</a>
					</div>
					<div class="about-line about-muted">Not affiliated with OpenAI.</div>
					<div class="about-line">
						<a href="docs/security.md" target="_blank" rel="noopener">docs/security.md</a>
					</div>
				</div>
				<div class="command-modal-actions">
					<button id="aboutModalCloseBtn" type="button">Close</button>
				</div>
			</div>
		</div>

		<div class="hidden legacy-session-controls" aria-hidden="true">
			<button id="newSessionBtn" type="button">New Session</button>
			<button id="newProjectBtn" type="button">New Project</button>
			<button id="stopSessionBtn" type="button">Stop Session</button>

			<select id="logVerbositySelect">
				<option value="errors">Errors</option>
				<option value="normal" selected>Normal</option>
				<option value="verbose">Verbose</option>
			</select>
			<select id="modelSelect"></select>
			<input id="modelCustomInput" type="text" placeholder="Custom model">
			<button id="reloadModelsBtn" type="button">Reload Models</button>
			<input id="cwdInput" type="text" placeholder="default cwd">

			<select id="existingSessionSelect"></select>
			<button id="attachSessionBtn" type="button">Attach</button>
			<select id="sessionSelect"></select>
		</div>
	</div>
	<script src="sessionTimeline.js"></script>
	<script src="app.js"></script>
</body>
</html>
